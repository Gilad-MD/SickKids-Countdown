<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Days until SickKids Fellowship â€” Jul 1, 2026</title>
  <meta name="description" content="A clean, dark-mode countdown widget that shows days remaining until July 1, 2026. Ideal for Notion embeds." />
  <style>
    :root{
      --bg-1:#0b0f1a;
      --bg-2:#0f172a; /* slate-900 */
      --bg-3:#0a0f1f;
      --card:#0f1220ee;
      --text:#e5e7eb; /* zinc-200 */
      --muted:#9ca3af; /* gray-400 */
      --accent:#22d3ee; /* cyan-400 */
      --shadow: 0 10px 30px rgba(0,0,0,.45), inset 0 0 0 1px rgba(255,255,255,.04);
      --radius: 22px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1200px 600px at 20% -10%, rgba(34,211,238,.10), transparent 60%),
                  radial-gradient(900px 500px at 100% 0%, rgba(99,102,241,.10), transparent 50%),
                  linear-gradient(180deg, var(--bg-1) 0%, var(--bg-2) 100%);
      color:var(--text);
      display:flex; align-items:center; justify-content:center;
      padding:24px;
    }
    .wrap{width:100%; max-width:880px}
    .card{
      position:relative; width:100%;
      border-radius:var(--radius);
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.01)) , var(--card);
      box-shadow:var(--shadow);
      overflow:hidden;
      padding:28px 28px 24px;
      backdrop-filter: blur(10px);
    }
    .header{
      display:flex; align-items:center; justify-content:space-between; gap:16px; margin-bottom:12px;
    }
    .title{
      font-weight:700; letter-spacing:.2px; font-size:clamp(18px, 2vw, 22px);
      display:flex; align-items:center; gap:10px;
    }
    .title .dot{width:10px; height:10px; border-radius:999px; background:var(--accent); box-shadow:0 0 20px var(--accent);}    
    .subtle{color:var(--muted); font-size:14px}

    .counter{
      display:flex; align-items:end; gap:12px; margin-top:6px;
    }
    .days{
      font-variant-numeric: tabular-nums; line-height:1;
      font-size: clamp(64px, 14vw, 160px);
      font-weight:800;
      letter-spacing:-2px;
      background: linear-gradient(180deg, #fff, #c7d2fe 40%, #a5b4fc 60%, #93c5fd 100%);
      -webkit-background-clip: text; background-clip:text; color:transparent; 
      text-shadow: 0 12px 60px rgba(99,102,241,.35);
      filter: drop-shadow(0 4px 18px rgba(0,0,0,.5));
    }
    .label{color:var(--muted); text-transform:uppercase; letter-spacing:2.2px; font-weight:700; padding-bottom:10px}

    .footer{
      margin-top:16px; display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap;
    }
    .badge{
      border:1px solid rgba(255,255,255,.09); background:rgba(255,255,255,.04); padding:8px 12px; border-radius:999px; color:var(--muted); font-size:12px;
    }
    .hint{color:var(--muted); font-size:12px}

    .confetti{position:absolute; inset:0; pointer-events:none}
    .particle{position:absolute; width:8px; height:8px; border-radius:2px; opacity:0; transform:translate(-50%,-50%) rotate(0deg); animation: pop 1.6s ease-out forwards;}
    @keyframes pop{
      0%{opacity:0; transform:translate(-50%,-50%) scale(.5) rotate(0deg)}
      10%{opacity:1;}
      100%{opacity:0; transform:translate(var(--dx), var(--dy)) rotate(420deg) scale(.9)}
    }

    /* Safe default height in Notion embeds */
    .spacer{height:4px}

    /* Respect prefers-reduced-motion */
    @media (prefers-reduced-motion: reduce){
      .particle{animation:none; opacity:0}
    }
  </style>
</head>
<body>
  <main class="wrap">
    <section class="card" role="group" aria-labelledby="heading" aria-describedby="sub">
      <div class="header">
        <div class="title"><span class="dot" aria-hidden="true"></span><span id="heading">Days until SickKids Fellowship</span></div>
        <div class="badge" id="dateBadge" aria-live="polite">Target: Jul 1, 2026</div>
      </div>

      <div class="counter" aria-live="polite" aria-atomic="true">
        <div class="days" id="days">â€”</div>
        <div class="label" id="unit">days</div>
      </div>

      <div class="footer">
        <div class="hint" id="sub">This widget counts whole calendar days. When it reaches 0, itâ€™s the day ðŸŽ‰</div>
      </div>
      <div class="confetti" id="confetti" aria-hidden="true"></div>
      <div class="spacer"></div>
    </section>
  </main>

  <script>
    (function(){
      const params = new URLSearchParams(location.search);
      // Allow optional customization via URL, e.g. ?date=2026-07-01&title=Days%20to%20SickKids&accent=%2322d3ee
      const safeText = (s, fallback) => {
        try{
          const t = (s ?? '').toString().trim();
          if(!t) return fallback; 
          // Strip tags
          return t.replace(/[<>]/g, '').slice(0, 120);
        }catch{ return fallback }
      };
      const defaultDate = '2026-07-01'; // YYYY-MM-DD
      const dateStr = safeText(params.get('date'), defaultDate);
      const titleText = safeText(params.get('title'), 'Days until SickKids Fellowship');
      const accent = safeText(params.get('accent'), '');
      if(accent){ document.documentElement.style.setProperty('--accent', accent); }

      const heading = document.getElementById('heading');
      const badge = document.getElementById('dateBadge');
      heading.textContent = titleText;

      // Parse YYYY-MM-DD into a UTC midnight timestamp to avoid DST off-by-one
      function dateToUTCMidnightMs(ymd){
        const m = /^(\d{4})-(\d{2})-(\d{2})$/.exec(ymd);
        if(!m) return NaN;
        const y = +m[1], mo = +m[2]-1, d = +m[3];
        return Date.UTC(y, mo, d);
      }
      const targetMs = dateToUTCMidnightMs(dateStr);
      if(Number.isNaN(targetMs)){
        badge.textContent = 'Invalid date';
      } else {
        // Pretty print date for badge using the viewerâ€™s locale
        const dt = new Date(targetMs);
        badge.textContent = `Target: ${dt.toLocaleDateString(undefined, {year:'numeric', month:'short', day:'numeric'})}`;
      }

      const daysEl = document.getElementById('days');
      const unitEl = document.getElementById('unit');
      const confetti = document.getElementById('confetti');

      function nowUTCMidnightMs(){
        const now = new Date();
        return Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate());
      }

      function diffDays(){
        if(Number.isNaN(targetMs)) return 0;
        const ms = targetMs - nowUTCMidnightMs();
        return Math.max(0, Math.round(ms / 86400000));
      }

      let lastVal; 
      function render(){
        const d = diffDays();
        if(d !== lastVal){
          lastVal = d;
          if(d === 0){
            daysEl.textContent = '0';
            unitEl.textContent = 'days';
            burst();
          } else {
            daysEl.textContent = d.toLocaleString();
            unitEl.textContent = 'days';
            pulse(daysEl);
          }
        }
      }

      function pulse(el){
        el.animate([
          { transform:'scale(1)', filter:'drop-shadow(0 4px 18px rgba(0,0,0,.5))'},
          { transform:'scale(1.02)' },
          { transform:'scale(1)' }
        ], { duration: 420, easing:'cubic-bezier(.2,.9,.2,1)' });
      }

      function burst(){
        // simple confetti burst
        const colors = ['#22d3ee','#60a5fa','#a78bfa','#34d399','#f472b6','#fbbf24'];
        const count = 46;
        confetti.innerHTML = '';
        for(let i=0;i<count;i++){
          const p = document.createElement('div');
          p.className = 'particle';
          const angle = (i / count) * Math.PI * 2;
          const dist = 140 + Math.random()*100;
          const dx = Math.cos(angle) * dist;
          const dy = Math.sin(angle) * dist;
          p.style.setProperty('--dx', dx+'px');
          p.style.setProperty('--dy', dy+'px');
          p.style.left = '50%'; p.style.top = '50%';
          p.style.background = colors[i % colors.length];
          confetti.appendChild(p);
        }
        // cleanup
        setTimeout(()=> confetti.innerHTML = '', 1800);
      }

      // Initial render and periodic refresh (minute-level is plenty for a day counter)
      render();
      setInterval(render, 60_000);

      // Resize observer improves appearance in Notion embeds when the block is resized
      new ResizeObserver(()=>{ /* no-op; forces reflow in some browsers */ }).observe(document.body);
    })();
  </script>
</body>
</html>
